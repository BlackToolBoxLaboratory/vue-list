"use strict";var e=require("vue"),t=function(e,t){var a={};return e.forEach((function(e){a=Object.assign({},a,l(e,t))})),a},l=function(e,t){var l={};return"object"==typeof t&&Object.keys(t).find((function(a){if(a===e)return l=Object.assign({},t[a]),!0})),l},a=e.defineComponent({name:"btb-vue-list-layer",props:{subdataList:{type:Array,default:function(){return[]}},iteration:{type:Number,default:0},collapseEnable:{type:Boolean,default:function(){return!1}},styleObj:{type:Object,default:function(){}}},emits:["clickEntry","toggleCollapsed","updateLayerSize"],setup:function(l,a){var n=a.emit;a.slots;var o=e.inject("BtbVueList-activeEntryID"),i=e.reactive(new Set),r=e.reactive({}),c=function(e,t){if(void 0===e.id)return console.error("BTB ERROR: Please make sure every entry has id."),!1;if(!l.collapseEnable)return n("clickEntry",e),!1;switch(t){case"hide":i.add(e.id),s(e.id,t),n("toggleCollapsed",e);break;case"show":i.delete(e.id),s(e.id,t),n("toggleCollapsed",e);break;default:c(e,i.has(e.id)?"show":"hide")}},s=function(e,t){var l=r["".concat(e,"_sublayer")];if(l)switch(t){case"hide":l.style.maxHeight="0px",n("updateLayerSize",-1*Math.ceil(l.scrollHeight));break;case"show":l.style.maxHeight="".concat(Math.ceil(l.scrollHeight),"px"),n("updateLayerSize",Math.ceil(l.scrollHeight))}};return e.onMounted((function(){l.subdataList.map((function(e){var t=r["".concat(e.id,"_sublayer")];t&&e.children&&(l.collapseEnable&&!0===e.defaultCollapsed?(t.style.maxHeight="0px",c(e,"hide")):t.style.maxHeight="".concat(Math.ceil(t.scrollHeight),"px"))}))})),{getStyle:t,props:l,activeID:o,refList:r,collapsedSet:i,clickEntry:function(e){n("clickEntry",e)},toggleCollapsed:function(e){n("toggleCollapsed",e)},toggleCollapsedHandler:c,resizeLayer:s,updateLayer:function(e,t){var l=r["".concat(t,"_sublayer")];l&&(l.style.maxHeight="".concat(Math.ceil(l.scrollHeight)+e,"px"),n("updateLayerSize",e))}}}});const n=["onClick"],o=["id"],i=["onClick"],r=["href"];a.render=function(t,l,a,c,s,y){const d=e.resolveComponent("btb-vue-list-layer");return e.openBlock(),e.createElementBlock("ul",{class:e.normalizeClass(`btb-vue-list-layer layer-${t.props.iteration}`),style:e.normalizeStyle({...t.getStyle(["btb-vue-list-layer",`layer-${t.props.iteration}`])})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.props.subdataList,(l=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[l.children?(e.openBlock(),e.createElementBlock("li",{class:"layer_container",style:e.normalizeStyle({...t.getStyle(["layer_container"])}),key:l.id},[e.createElementVNode("div",{class:e.normalizeClass([`container_entry entry-${l.id}`,{"entry-collapsable":t.props.collapseEnable},{"entry-active":t.activeID&&t.activeID===l.id}]),style:e.normalizeStyle({"padding-left":`${t.props.iteration}rem`,...t.getStyle(["container_entry",`entry-${l.id}`,t.props.collapseEnable?"entry-collapsable":"",t.activeID&&t.activeID===l.id?"entry-active":""])}),onClick:e=>t.toggleCollapsedHandler(l)},[e.createElementVNode("div",{class:"entry_title",style:e.normalizeStyle({...t.getStyle(["entry_title"])})},[t.$slots[l.id]?e.renderSlot(t.$slots,l.id,{key:0}):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(l.title),1)],64))],4),t.props.collapseEnable?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["entry_collapseBtn collapseBtn-default",{"collapseBtn-on":t.collapsedSet.has(l.id)}]),style:e.normalizeStyle({...t.getStyle(["entry_collapseBtn","collapseBtn-default",t.collapsedSet.has(l.id)?"collapseBtn-on":""])})},[e.createElementVNode("div",{class:"collapseBtn_arrow",style:e.normalizeStyle({...t.getStyle(["collapseBtn_arrow"])})},null,4)],6)):e.createCommentVNode("v-if",!0)],14,n),l.children.length>0?(e.openBlock(),e.createElementBlock("div",{key:0,class:"container_sublayer",id:`${l.id}_sublayer`,style:e.normalizeStyle({...t.getStyle(["container_sublayer"])}),ref_for:!0,ref:e=>{t.refList[`${l.id}_sublayer`]=e}},[e.createVNode(d,{activeID:t.activeID,subdataList:l.children,styleObj:t.props.styleObj,iteration:t.props.iteration+1,collapseEnable:t.props.collapseEnable,onUpdateLayerSize:e=>t.updateLayer(e,l.id),onClickEntry:t.clickEntry,onToggleCollapsed:t.toggleCollapsed},null,8,["activeID","subdataList","styleObj","iteration","collapseEnable","onUpdateLayerSize","onClickEntry","onToggleCollapsed"])],12,o)):e.createCommentVNode("v-if",!0)],4)):(e.openBlock(),e.createElementBlock("li",{class:"layer_container",style:e.normalizeStyle({...t.getStyle(["layer_container"])}),key:l.id},[e.createElementVNode("div",{class:e.normalizeClass(["container_entry",`entry-${l.id}`,{"entry-active":t.activeID&&t.activeID===l.id}]),style:e.normalizeStyle({"padding-left":`${t.props.iteration}rem`,...t.getStyle(["container_entry",`entry-${l.id}`,t.activeID&&t.activeID===l.id?"entry-active":""])}),onClick:e=>t.clickEntry(l)},[e.createElementVNode("div",{class:"entry_title",style:e.normalizeStyle({...t.getStyle(["entry_title"])})},[t.$slots[l.id]?e.renderSlot(t.$slots,l.id,{key:0}):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[void 0===l.href?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(l.title),1)],64)):(e.openBlock(),e.createElementBlock("a",{key:1,className:"title_link",href:l.href},e.toDisplayString(l.title),9,r))],64))],4)],14,i)],4))],64)))),256))],6)},a.__file="src/list/ListLayer.vue";var c=e.defineComponent({name:"btb-vue-list",props:{dataList:{type:Array,default:function(){return[]}},collapseEnable:{type:Boolean,default:function(){return!1}},defaultActiveID:{type:String},activeID:{type:String},styleObj:{type:Object,default:function(){}}},emits:["update:activeID","clickEntry","toggleCollapsed"],setup:function(l,n){var o=n.emit,i=n.slots,r=e.ref(l.activeID||l.defaultActiveID||""),c=e.computed((function(){return Object.keys(i)})),s=function(e){r.value=e,void 0!==l.activeID&&o("update:activeID",e)};return e.onUpdated((function(){void 0!==l.activeID&&s(l.activeID)})),e.provide("BtbVueList-activeEntryID",r),{BtbVueListLayer:a,getStyle:t,props:l,slotList:c,activeEntryID:r,clickEntry:function(e){s(e.id),o("clickEntry",e)},changeActiveID:s,toggleCollapsed:function(e){o("toggleCollapsed",e)}}}});c.render=function(t,l,a,n,o,i){const r=e.resolveComponent("btb-vue-list-layer");return e.openBlock(),e.createElementBlock("div",{class:"btb-vue-list",style:e.normalizeStyle({...t.getStyle(["btb-vue-list"],t.props.styleObj)})},[e.createVNode(r,{id:"root",activeID:t.activeEntryID,subdataList:t.props.dataList,styleObj:t.props.styleObj,collapseEnable:t.props.collapseEnable,iteration:0,onClickEntry:t.clickEntry,onToggleCollapsed:t.toggleCollapsed},e.createSlots({_:2},[e.renderList(t.slotList,(l=>({name:l,fn:e.withCtx((()=>[e.renderSlot(t.$slots,l)]))})))]),1032,["activeID","subdataList","styleObj","collapseEnable","onClickEntry","onToggleCollapsed"])],4)},c.__file="src/list/List.vue";var s=function(e){s.installed||(s.installed=!0,e.component(c.name,c),e.component(a.name,a))};s.installed=!1;var y={install:s};module.exports=y;
